<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Luckdraw by hiwd</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" href="css/luckdraw.css">
  </head>
  <body>
    <div class="page-header">
      <h1 class="project-name">Luckdraw</h1>
      <h2 class="project-tagline">抽奖，方形</h2>
      <a href="https://github.com/hiwd/luckdraw" class="btn">View on GitHub</a>
      <a href="https://github.com/hiwd/luckdraw/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/hiwd/luckdraw/tarball/master" class="btn">Download .tar.gz</a>
    </div>

    <div class="main-content">
      <div class="con">
        <div class="box" id="js-rect-luck-draw-con">
            <i class="item js-item selected" data-sort="1" data-prize-id="1">奖品1</i>
            <i class="item js-item" data-sort="2" data-prize-id="2">奖品2</i>
            <i class="item js-item" data-sort="3" data-prize-id="3">奖品3</i>
            <i class="item js-item" data-sort="8" data-prize-id="4">奖品4</i>
            <i class="btn js-start-btn">Go</i>
            <i class="item js-item" data-sort="4" data-prize-id="5">奖品5</i>
            <i class="item js-item" data-sort="7" data-prize-id="6">奖品6</i>
            <i class="item js-item" data-sort="6" data-prize-id="7">奖品7</i>
            <i class="item js-item" data-sort="5" data-prize-id="8">奖品8</i>
        </div>
        <div class="info" id="js-luck-draw-info">
            
        </div>
        </div>

      <div class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/hiwd/luckdraw">Luckdraw</a> is maintained by <a href="https://github.com/hiwd">hiwd</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </div>

    </div>
    <script src="http://apps.bdimg.com/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="js/rect.luckdraw.js"></script>
    <script>
        $(function(){
            var prizeList = {}, 
                $luckDrawInfo = $('#js-luck-draw-info');
            for(var i=1; i<9; i++){
                prizeList[i] = {
                    name: '奖品' + i
                };
            }

            var rld = new RectLuckDraw('#js-rect-luck-draw-con', prizeList, {
                turnAroundCount: 3, 
                maxAnimateDelay: 500,
                turnStartCallback: function(){
                    log('摇奖开始...');
                },
                turnEndCallback: function(prizeId, obj){
                    log('恭喜您中了 - ' + obj.name);
                    log('&nbsp;');
                    this.unlock();
                },
                startBtnClick: function($btn){
                    var prizeId = Math.floor(Math.random() * 8) + 1;
                    if(this.isLocked()){
                        log('正在摇奖中...');
                        return;
                    }

                    log('最终奖品编号 - ' + prizeId);
                    this.lock();
                    this.start(prizeId);
                }
            });

            function log(msg){
                $luckDrawInfo.append('<p>' + msg + '</p>');
                $luckDrawInfo.scrollTop($luckDrawInfo[0].scrollHeight);
            }
        });
    </script>
  </body>
</html>
